<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC   "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd"
>
<!-- xml 이름상관 없음. *.xml로 설정했으니까 -->
<!-- 이 xml이 어떤 interface와 연결되는지 설정 -->
<mapper namespace="com.quiz.bank.dao.AdminDAO">

	<!-- 관리자 공부 게시판 리스트 호출 쿼리 -->
	<select id="studylist" resultType="com.quiz.bank.dto.StudyBoardDTO">
		SELECT * FROM study_board JOIN board_category ON study_board.board_cate_no = board_category.board_cate_no
	</select>
	
	<select id="allCount" resultType="int">
		SELECT COUNT (board_no) FROM study_board
	</select>
	
	<!-- 관리자 공부 게시판 검색 쿼리 -->
	<select id="StudySearchList" parameterType="com.quiz.bank.dto.StudyBoardDTO" resultType="com.quiz.bank.dto.StudyBoardDTO">
		SELECT * FROM study_board JOIN board_category ON study_board.board_cate_no = board_category.board_cate_no
		
		<choose>
			<when test="SearchType != null and SearchType.equals('all') ">
				WHERE title OR user_id LIKE CONCAT ('%',#{keyword},'%')
			</when>
			<when test="SearchType != null and SearchType.equals('tit') ">
				WHERE title LIKE CONCAT ('%',#{keyword},'%')
			</when>
			<when test="SearchType != null and SearchType.equals('user') ">
				WHERE user_id LIKE CONCAT ('%',#{keyword},'%')
			</when>
		</choose>
		
		
		<!-- <trim prefix="WHERE" prefixOverrides="AND|OR">
			<if test="Keyword !=null">
				<if test="SearchType == all">
					AND title OR user_id LIKE CONCAT ('%',#{keyword},'%')
				</if>
				<if test="SearchType == 'tit'">
					AND title LIKE CONCAT ('%',#{keyword},'%')
				</if>
				<if test="SearchType == 'user'">
					AND user_id LIKE CONCAT ('%',#{keyword},'%')
				</if>
			</if>
		</trim> -->
	</select>
	
</mapper>